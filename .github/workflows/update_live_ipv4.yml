name: Update live_ipv4.txt

on:
  schedule:
    # 定时执行：每天凌晨2点执行（可根据需要调整）
    - cron: '0 2 * * *'
  workflow_dispatch: # 允许手动触发

jobs:
  update-live-ipv4:
    runs-on: ubuntu-latest

    steps:
    # 检出当前仓库代码
    - name: Checkout repository
      uses: actions/checkout@v3

    # 设置 Git 用户信息
    - name: Set up Git user
      run: |
        git config --global user.name 'your-github-username'
        git config --global user.email 'your-email@example.com'

    # 安装 Python 环境
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.x'

    # 安装依赖
    - name: Install dependencies
      run: pip install requests

    # 运行 Python 脚本
    - name: Run Python script
      run: python script.py

    # 提交并推送文件
    - name: Commit and push changes
      run: |
        git add live_ipv4.txt
        git commit -m "Update live_ipv4.txt"
        git push
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
